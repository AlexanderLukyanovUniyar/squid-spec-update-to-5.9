Index: squid/src/dns_internal.c
diff -c squid/src/dns_internal.c:1.45.2.2 squid/src/dns_internal.c:1.45.2.3
*** squid/src/dns_internal.c:1.45.2.2	Sat Dec  6 10:19:37 2003
--- squid/src/dns_internal.c	Mon May 31 17:33:52 2004
***************
*** 656,669 ****
      if (0 == nns)
  	idnsParseWIN32Registry();
  #endif
!     if (0 == nns)
! 	fatal("Could not find any nameservers.\n"
  #if defined(_SQUID_MSWIN_) || defined(_SQUID_CYGWIN_)
! 	    "       Please check your TCP-IP settings or /etc/resolv.conf file\n"
  #else
! 	    "       Please check your /etc/resolv.conf file\n"
  #endif
! 	    "       or use the 'dns_nameservers' option in squid.conf.");
      if (!init) {
  	memDataInit(MEM_IDNS_QUERY, "idns_query", sizeof(idns_query), 0);
  	cachemgrRegister("idns",
--- 656,671 ----
      if (0 == nns)
  	idnsParseWIN32Registry();
  #endif
!     if (0 == nns) {
! 	debug(78, 1) ("Warning: Could not find any nameservers. Trying to use localhost\n");
  #if defined(_SQUID_MSWIN_) || defined(_SQUID_CYGWIN_)
! 	debug(78, 1) ("Please check your TCP-IP settings or /etc/resolv.conf file\n");
  #else
! 	debug(78, 1) ("Please check your /etc/resolv.conf file\n");
  #endif
! 	debug(78, 1) ("or use the 'dns_nameservers' option in squid.conf.");
! 	idnsAddNameserver("127.0.0.1");
!     }
      if (!init) {
  	memDataInit(MEM_IDNS_QUERY, "idns_query", sizeof(idns_query), 0);
  	cachemgrRegister("idns",
