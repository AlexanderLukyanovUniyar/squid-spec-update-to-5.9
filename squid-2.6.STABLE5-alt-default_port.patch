commit 1ff19910c05d1352b2c4e63b1abaf87bf1d4b8d8
Author: Grigory Batalov <bga@altlinux.org>
Date:   Wed Dec 6 01:23:49 2006 +0300

    Specify default port to listen to if none specified.

diff --git a/squid/src/cf.data.pre b/squid/src/cf.data.pre
index fd12b21..c12c948 100644
--- a/squid/src/cf.data.pre
+++ b/squid/src/cf.data.pre
@@ -56,6 +56,7 @@ COMMENT_END
 NAME: http_port ascii_port
 TYPE: http_port_list
 DEFAULT: none
+DEFAULT_IF_NONE: @DEFAULT_HTTP_PORT@
 LOC: Config.Sockaddr.http
 DOC_START
 	Usage:	port [options]
commit f98c642f3effa642fd9bbe4b155d7d205000208b
Author: Grigory Batalov <bga@altlinux.org>
Date:   Wed Dec 6 01:30:33 2006 +0300

    Enable check_null_http_port_list usage.

diff --git a/squid/src/cache_cf.c b/squid/src/cache_cf.c
index 3879e76..9faec9a 100644
--- a/squid/src/cache_cf.c
+++ b/squid/src/cache_cf.c
@@ -113,9 +113,7 @@ static int check_null_sockaddr_in_list(const sockaddr_in_list *);
 static void parse_http_port_list(http_port_list **);
 static void dump_http_port_list(StoreEntry *, const char *, const http_port_list *);
 static void free_http_port_list(http_port_list **);
-#if 0
 static int check_null_http_port_list(const http_port_list *);
-#endif
 #if USE_SSL
 static void parse_https_port_list(https_port_list **);
 static void dump_https_port_list(StoreEntry *, const char *, const https_port_list *);
@@ -2823,13 +2821,11 @@ free_http_port_list(http_port_list ** head)
     }
 }
 
-#if UNUSED_CODE
 static int
 check_null_http_port_list(const http_port_list * s)
 {
     return NULL == s;
 }
-#endif
 
 #if USE_SSL
 static void
